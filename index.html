<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <style>
      body {
        user-select: none
      }
    </style>
  </head>
  <body>
    <Table Border=2>
      <TR>
      <TD><iframe src="TestGame.html" allowtransparency="true" width="480" height="360" frameborder="0" scrolling="no" allowfullscreen></iframe></TD>
      </TR>
      <TR>
      <TD><img src="controller.png" usemap="#controls" width="480" height="360"></TD>
      </TR>
    </Table>
    <map name="controls">
      <area id="keyup" alt="Up Arrow Key" title="Up" coords="85,50,146,110" shape="rect">
      <area id="keyright" alt="Right Arrow Key" title="Right" coords="148,110,208,174" shape="rect">
      <area id="keyleft" alt="Left Arrow Key" title="Left" coords="22,110,84,174" shape="rect">
      <area id="keydown" alt="Down Arrow Key" title="Down" coords="85,175,146,235" shape="rect">
      <area id="keyspace" alt="Space Bar" title="Space" coords="145,285,335,325" shape="rect">
      <area id="keyb" alt="B Button" title="B" coords="345,196,40" shape="circle">
      <area id="keya" alt="A Button" title="A" coords="420,125,40" shape="circle">
    </map>
    <script>
      const keys = [
        {id: "keyspace", key: " ", keyCode: 32},
        {id: "keyup", key: "ArrowUp", keyCode: 38},
        {id: "keydown", key: "ArrowDown", keyCode: 40},
        {id: "keyleft", key: "ArrowLeft", keyCode: 37},
        {id: "keyright", key: "ArrowRight", keyCode: 39},
        {id: "keya", key: "a", keyCode: 65},
        {id: "keyb", key: "b", keyCode: 66},
      ];
      const iframe = document.querySelector("iframe")
      iframe.addEventListener("load", () => {
        for (const {id, key, keyCode} of keys) {
          document.getElementById(id).addEventListener("pointerdown", (e) => {
            iframe.contentDocument.dispatchEvent(new KeyboardEvent("keydown", {key, keyCode}));
          });
          document.getElementById(id).addEventListener("pointerup", (e) => {
            iframe.contentDocument.dispatchEvent(new KeyboardEvent("keyup", {key, keyCode}));
          });
        }
      });
    </script>
  </body>
</html>